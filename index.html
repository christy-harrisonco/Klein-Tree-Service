<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Klein Tree Services | Paynesville, MN</title>
    
    <!-- Tailwind CSS & Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Montserrat:ital,wght@0,700;0,900;1,900&family=Oswald:wght@400;700&family=Permanent+Marker&display=swap" rel="stylesheet">
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              klein: { orange: '#f37021', dark: '#0f0c0b' },
              timber: { dark: '#0f0c0b', muted: '#1a1715', light: '#a3a3a3' }
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              heading: ['Montserrat', 'sans-serif'],
              rugged: ['Oswald', 'sans-serif'],
              marker: ['Permanent Marker', 'cursive']
            }
          }
        }
      }
    </script>

    <style>
      body { background-color: #0f0c0b; color: #fff; margin: 0; padding: 0; overflow-x: hidden; }
      .btn-premium { background-color: #f37021; transition: all 0.3s ease; text-transform: uppercase; font-weight: 900; letter-spacing: 0.1em; }
      .btn-premium:hover { background-color: #fff; color: #f37021; transform: translateY(-2px); box-shadow: 0 10px 20px -10px #f37021; }
      .bg-timber-grain { background-color: #1a1715; background-image: url("https://www.transparenttextures.com/patterns/wood-pattern.png"); }
      .glass { backdrop-filter: blur(12px); background: rgba(15, 12, 11, 0.85); border-bottom: 1px solid rgba(255,255,255,0.05); }
      html { scroll-behavior: smooth; scroll-padding-top: 80px; }
      #root:empty::after { 
        content: "IGNITING THE SAWS..."; 
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
        font-family: 'Oswald', sans-serif; text-transform: uppercase; letter-spacing: 0.5em; opacity: 0.5;
        animation: pulse 2s infinite;
      }
      @keyframes pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.7; } }
    </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.35.0",
    "react": "https://esm.sh/react@^19.2.3",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "react/": "https://esm.sh/react@^19.2.3/",
    "vite": "https://esm.sh/vite@^7.3.1",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
</head>
<body class="antialiased">
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useRef } from 'https://esm.sh/react@19.0.0';
        import { createRoot } from 'https://esm.sh/react-dom@19.0.0/client';
        import * as Lucide from 'https://esm.sh/lucide-react@0.475.0';
        import { GoogleGenAI } from 'https://esm.sh/@google/genai@1.34.0';

        // Fake process for library safety
        window.process = { env: { API_KEY: '' } };

        const App = () => {
            const [isScrolled, setIsScrolled] = useState(false);
            const [chatOpen, setChatOpen] = useState(false);
            const [messages, setMessages] = useState([{ role: 'model', text: "Foreman here. Keith's up a tree, but I can help. What's the job?" }]);
            const [chatInput, setChatInput] = useState('');
            const [isTyping, setIsTyping] = useState(false);

            useEffect(() => {
                const handleScroll = () => setIsScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const handleChat = async (e) => {
                e.preventDefault();
                if (!chatInput.trim()) return;
                const userMsg = chatInput;
                setChatInput('');
                setMessages(prev => [...prev, { role: 'user', text: userMsg }]);
                setIsTyping(true);
                
                try {
                    const ai = new GoogleGenAI({ apiKey: window.process.env.API_KEY || '' });
                    const response = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: [{ role: 'user', parts: [{ text: userMsg }] }],
                        config: { 
                            systemInstruction: "You are the Shop Foreman for Klein Tree Services in Paynesville, MN. Brothers Keith (climber) and Kevin (ground) own it. You are professional, dry, and local. Direct pricing questions to (320) 428-6726." 
                        }
                    });
                    setMessages(prev => [...prev, { role: 'model', text: response.text || "Contact Keith at (320) 428-6726." }]);
                } catch (e) {
                    setMessages(prev => [...prev, { role: 'model', text: "Signal's spotty. Call the crew: (320) 428-6726." }]);
                } finally {
                    setIsTyping(false);
                }
            };

            return (
                <div className="min-h-screen bg-timber-dark">
                    {/* Header */}
                    <header className={`fixed w-full z-50 transition-all duration-500 ${isScrolled ? 'glass py-3' : 'bg-transparent py-8'}`}>
                        <div className="max-w-7xl mx-auto px-4 flex justify-between items-center">
                            <div className="flex items-center space-x-4">
                                <div className="h-12 w-12 bg-klein-orange rounded flex items-center justify-center font-black italic text-2xl shadow-lg">K</div>
                                <div className="flex flex-col">
                                    <span className="font-heading text-xl md:text-2xl font-black uppercase italic leading-none">KLEIN TREE <span className="text-klein-orange">SERVICES</span></span>
                                    <span className="text-[8px] font-bold uppercase tracking-[0.6em] text-white/40">PAYNESVILLE, MN</span>
                                </div>
                            </div>
                            <nav className="hidden lg:flex items-center space-x-8 font-rugged text-sm font-bold uppercase tracking-widest">
                                <a href="#home" className="hover:text-klein-orange">Home</a>
                                <a href="#services" className="hover:text-klein-orange">Services</a>
                                <a href="#about" className="hover:text-klein-orange">About</a>
                                <a href="tel:320-428-6726" className="bg-klein-orange px-6 py-2 text-white italic font-black">Call (320) 428-6726</a>
                            </nav>
                        </div>
                    </header>

                    {/* Hero */}
                    <section id="home" className="relative min-h-screen flex items-center justify-center overflow-hidden">
                        <div className="absolute inset-0 z-0">
                            <img src="https://images.unsplash.com/photo-1518495973542-4542c06a5843?q=80&w=1920&auto=format&fit=crop" className="w-full h-full object-cover opacity-40 scale-105" />
                            <div className="absolute inset-0 bg-gradient-to-t from-timber-dark via-transparent to-timber-dark/60"></div>
                        </div>
                        <div className="relative z-10 max-w-7xl mx-auto px-4 text-center lg:text-left pt-20">
                            <h1 className="text-6xl md:text-9xl font-heading font-black leading-none mb-6 italic uppercase tracking-tighter">
                                PRECISION<br/><span className="text-klein-orange">POWER.</span>
                            </h1>
                            <p className="text-2xl md:text-4xl font-marker mb-12 max-w-3xl leading-relaxed">
                                We leave your yard cleaner than we found it. Keith's up high, Kevin's on the line.
                            </p>
                            <div className="flex flex-col sm:flex-row gap-4">
                                <a href="#contact" className="btn-premium px-12 py-5 text-xl text-center font-black">GET A QUOTE</a>
                                <a href="#services" className="px-12 py-5 border-2 border-white/20 hover:border-white transition-all font-bold tracking-widest text-center">SERVICES</a>
                            </div>
                        </div>
                    </section>

                    {/* Services */}
                    <section id="services" className="py-24 bg-timber-muted">
                        <div className="max-w-7xl mx-auto px-4">
                            <h2 className="text-klein-orange font-rugged font-bold tracking-[0.5em] text-sm mb-4 uppercase italic">CAPABILITIES</h2>
                            <h3 className="text-5xl md:text-7xl font-heading font-black italic uppercase mb-16">ARBORIST WORK.</h3>
                            <div className="grid md:grid-cols-2 gap-8">
                                {[
                                    { title: 'Technical Removal', desc: 'Complex removals near houses and power lines.' },
                                    { title: 'Canopy Maintenance', desc: 'Proper pruning to keep your mature trees healthy.' },
                                    { title: 'Stump Grinding', desc: 'Full removal for a perfectly flat lawn.' },
                                    { title: 'Storm Response', desc: '24/7 emergency cleanup for central Minnesota.' }
                                ].map(s => (
                                    <div key={s.title} className="bg-timber-dark p-10 border border-white/5 hover:border-klein-orange transition-all group">
                                        <h4 className="text-2xl font-heading font-black italic uppercase mb-4 text-klein-orange">{s.title}</h4>
                                        <p className="text-timber-light leading-relaxed">{s.desc}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* About */}
                    <section id="about" className="py-24 border-t border-white/5">
                        <div className="max-w-7xl mx-auto px-4 grid lg:grid-cols-2 gap-16 items-center">
                            <div className="relative border-4 border-white/5 p-2">
                                <img src="https://images.unsplash.com/photo-1542332213-9b5a5a3fad35?auto=format&fit=crop&q=80&w=1200" className="w-full h-[500px] object-cover grayscale" />
                                <div className="absolute -bottom-6 -right-6 bg-white p-6 text-timber-dark shadow-2xl max-w-xs font-marker text-xl italic">"One family, zero shortcuts. We treat your yard like our own."</div>
                            </div>
                            <div>
                                <h3 className="text-5xl md:text-7xl font-heading font-black italic uppercase mb-8 leading-none">THE KLEIN <br/> BROTHERS.</h3>
                                <p className="text-lg text-timber-light leading-relaxed mb-8">Keith handles the technical precision work in the canopy—climbing and cutting that requires absolute focus. Kevin works alongside him on the ground, keeping the operation running smooth and safe.</p>
                                <div className="bg-klein-orange/10 border-l-4 border-klein-orange p-6 italic font-bold">Paynesville Proud • Fully Insured • Free Quotes</div>
                            </div>
                        </div>
                    </section>

                    {/* Contact */}
                    <section id="contact" className="py-24 bg-white text-timber-dark">
                        <div className="max-w-7xl mx-auto px-4 text-center">
                            <h3 className="text-5xl md:text-8xl font-heading font-black italic uppercase mb-8">GET IN TOUCH.</h3>
                            <a href="tel:320-428-6726" className="text-4xl md:text-7xl font-heading font-black text-klein-orange hover:text-timber-dark transition-colors">(320) 428-6726</a>
                            <p className="mt-8 font-marker text-2xl text-zinc-400">Call Keith & Kevin directly for an estimate.</p>
                        </div>
                    </section>

                    {/* AI Foreman */}
                    <div className="fixed bottom-8 right-8 z-[70]">
                        {chatOpen && (
                            <div className="absolute bottom-20 right-0 w-80 sm:w-96 h-[500px] bg-timber-dark border-4 border-zinc-800 shadow-2xl flex flex-col overflow-hidden">
                                <div className="bg-white p-4 flex justify-between items-center text-timber-dark border-b-4 border-klein-orange font-heading font-black italic">
                                    <span>SHOP FOREMAN</span>
                                    <button onClick={() => setChatOpen(false)}>X</button>
                                </div>
                                <div className="flex-1 overflow-y-auto p-4 bg-timber-grain space-y-4">
                                    {messages.map((m, i) => (
                                        <div key={i} className={`p-3 text-sm font-bold ${m.role === 'user' ? 'bg-klein-orange ml-8 italic' : 'bg-white text-zinc-900 mr-8 border-l-4 border-klein-orange'}`}>{m.text}</div>
                                    ))}
                                    {isTyping && <div className="text-[10px] animate-pulse uppercase tracking-widest opacity-30">CALCULATING...</div>}
                                </div>
                                <form onSubmit={handleChat} className="p-2 bg-white flex space-x-2">
                                    <input value={chatInput} onChange={e => setChatInput(e.target.value)} placeholder="ASK THE FOREMAN..." className="flex-1 bg-zinc-100 px-4 py-2 font-rugged text-xs text-zinc-900 outline-none" />
                                    <button className="bg-zinc-900 text-white p-2 px-4 hover:bg-klein-orange transition-colors italic font-black">SEND</button>
                                </form>
                            </div>
                        )}
                        <button onClick={() => setChatOpen(!chatOpen)} className="bg-timber-dark border-4 border-zinc-800 p-5 shadow-2xl hover:border-klein-orange transition-all">
                            <Lucide.MessageSquare className="h-8 w-8 text-white" />
                        </button>
                    </div>
                </div>
            );
        };

        createRoot(document.getElementById('root')).render(React.createElement(App));
    </script>
</body>
</html>